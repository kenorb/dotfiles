# ~/.functions_unicode
# Defines shell functions for parsing unicode characters.

# Print characters from Unicode ranges matching rg-lang patterns
# Args: {name}
pl-print-chars() {
    case "$1" in
        # East Asian
        "chinese") pl-print-unicode-range "0x4E00" "0x9FFF" ;;
        "chinese-ext") pl-print-unicode-range "0x3400" "0x4DBF" ;;
        "japanese-kana")
            pl-print-unicode-range "0x3040" "0x309F"
            pl-print-unicode-range "0x30A0" "0x30FF" ;;
        "korean-syllables") pl-print-unicode-range "0xAC00" "0xD7AF" ;;

        # South Asian
        "devanagari") pl-print-unicode-range "0x0900" "0x097F" ;;
        "bengali") pl-print-unicode-range "0x0980" "0x09FF" ;;
        "tamil") pl-print-unicode-range "0x0B80" "0x0BFF" ;;

        # Middle Eastern
        "arabic") pl-print-unicode-range "0x0621" "0x0669" ;;
        "hebrew") pl-print-unicode-range "0x0590" "0x05FE" ;;

        # European
        "greek") pl-print-unicode-range "0x0374" "0x03FF" ;;
        "cyrillic") pl-print-unicode-range "0x0400" "0x04FF" ;;
        "armenian") pl-print-unicode-range "0x0531" "0x0587" ;;

        # Special Characters
        "emoji") pl-print-unicode-range "0x1F300" "0x1F9FF" ;;
        "math") pl-print-unicode-range "0x2200" "0x22FF" ;;
        "arrows") pl-print-unicode-range "0x2190" "0x21FF" ;;

        # Help
        "help"|"--help"|"-h"|"")
            echo "Usage: pl-print-chars TYPE"
            echo "Print Unicode characters from specified script range"
            echo
            echo "Available scripts:"
            echo "  East Asian: chinese, chinese-ext, japanese-kana, korean-syllables"
            echo "  South Asian: devanagari, bengali, tamil"
            echo "  Middle Eastern: arabic, hebrew"
            echo "  European: greek, cyrillic, armenian"
            echo "  Special: emoji, math, arrows"
            echo
            echo "Example: pl-print-chars chinese"
            ;;
        *)
            echo "Unknown char types: $1"
            echo "Use 'pl-print-chars help' to see available options"
            return 1
            ;;
    esac
}

# Print Unicode range.
# Args: {range1} {range2}
pl-print-unicode-range() {
  cat <<_EOF | perl
    binmode(STDOUT, ":encoding(UTF-8)");
    for (\$n = $1; \$n <= $2; \$n++) { print chr(\$n) }
_EOF
}

# Filters 2-3 unicode characters.
rg-23u() {
  rg -o '([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])' \
    -r "$(printf '$1$2\n$2$3\n$1$2$3')"
}

# Filters 2-4 unicode characters.
rg-234u() {
  rg -o '([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])' \
    -r "$(printf '$1$2\n$2$3\n$3$4\n$1$2$3\n$2$3$4\n$1$2$3$4')"
}

# Filters 2-5 unicode characters.
rg-2345u() {
  rg -o '([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])' \
    -r "$(printf '$1$2\n$2$3\n$3$4\n$4$5\n$1$2$3\n$2$3$4\n$3$4$5\n$1$2$3$4\n$2$3$4$5\n$1$2$3$4$5')"
}

# Filters 3-6 unicode characters.
rg-3456u() {
  rg -o '([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])' \
    -r "$(printf '$1$2$3\n$2$3$4\n$3$4$5\n$4$5$6\n$1$2$3$4\n$2$3$4$5\n$3$4$5$6\n$1$2$3$4$5\n$2$3$4$5$6\n$1$2$3$4$5$6')"
}

# Filters 3-7 unicode characters.
rg-34567u() {
  rg -o '([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])' \
    -r "$(printf '$1$2$3\n$2$3$4\n$3$4$5\n$4$5$6\n$5$6$7\n$1$2$3$4\n$2$3$4$5\n$3$4$5$6\n$4$5$6$7\n$1$2$3$4$5\n$2$3$4$5$6\n$3$4$5$6$7\n$1$2$3$4$5$6\n$2$3$4$5$6$7\n$1$2$3$4$5$6$7')"
}

# Filters 3-8 unicode characters.
rg-345678u() {
  rg -o '([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])' \
    -r "$(printf '$1$2$3\n$2$3$4\n$3$4$5\n$4$5$6\n$5$6$7\n$6$7$8\n$1$2$3$4\n$2$3$4$5\n$3$4$5$6\n$4$5$6$7\n$5$6$7$8\n$1$2$3$4$5\n$2$3$4$5$6\n$3$4$5$6$7\n$4$5$6$7$8\n$1$2$3$4$5$6\n$2$3$4$5$6$7\n$3$4$5$6$7$8\n$1$2$3$4$5$6$7\n$2$3$4$5$6$7$8\n$1$2$3$4$5$6$7$8')"
}

# Filters 3-9 unicode characters.
rg-3456789u() {
  rg -o '([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])' \
    -r "$(printf '$1$2$3\n$2$3$4\n$3$4$5\n$4$5$6\n$5$6$7\n$6$7$8\n$7$8$9\n$1$2$3$4\n$2$3$4$5\n$3$4$5$6\n$4$5$6$7\n$5$6$7$8\n$6$7$8$9\n$1$2$3$4$5\n$2$3$4$5$6\n$3$4$5$6$7\n$4$5$6$7$8\n$5$6$7$8$9\n$1$2$3$4$5$6\n$2$3$4$5$6$7\n$3$4$5$6$7$8\n$4$5$6$7$8$9\n$1$2$3$4$5$6$7\n$2$3$4$5$6$7$8\n$3$4$5$6$7$8$9\n$1$2$3$4$5$6$7$8\n$2$3$4$5$6$7$8$9\n$1$2$3$4$5$6$7$8$9')"
}

# Filters all unicode characters.
rg-all-unicode() {
  tee >/dev/null >(rg-23u) >(rg-234u) >(rg-2345u) >(rg-3456u) >(rg-34567u) >(rg-345678u) >(rg-3456789u)
}

# Filters 2 unicode characters.
rg-perm-2u() {
  rg -o '([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])' \
    -r "$(crunch 4 4 + + 12 -t '$%$%' 2>/dev/null)"
}

# Permutate 3 unicode characters.
rg-perm-3u() {
  rg -o '([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])' \
    -r "$(crunch 6 6 + + 123 -t '$%$%$%' 2>/dev/null)"
}

# Permutate 4 unicode characters.
rg-perm-4u() {
  rg -o '([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])' \
    -r "$(crunch 8 8 + + 1234 -t '$%$%$%$%' 2>/dev/null)"
}

# Permutate 5 unicode characters.
rg-perm-5u() {
  rg -o '([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])' \
    -r "$(crunch 10 10 + + 12345 -t '$%$%$%$%$%' 2>/dev/null)"
}

# Permutate 5 unicode characters into 3.
rg-perm-5u-to-3u() {
  rg -o '([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])' \
    -r "$(crunch 6 6 + + 12345 -t '$%$%$%' 2>/dev/null)"
}

# Permutate 5 unicode characters into 4.
rg-perm-5u-to-4u() {
  rg -o '([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])' \
    -r "$(crunch 8 8 + + 12345 -t '$%$%$%$%' 2>/dev/null)"
}

# Permutate 6 unicode characters into 3.
rg-perm-6u-to-3u() {
  rg -o '([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])' \
    -r "$(crunch 6 6 + + 123456 -t '$%$%$%' 2>/dev/null)"
}

# Permutate 6 unicode characters into 4.
rg-perm-6u-to-4u() {
  rg -o '([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])' \
    -r "$(crunch 8 8 + + 123456 -t '$%$%$%$%' 2>/dev/null)"
}

# Permutate 6 unicode characters into 5.
rg-perm-6u-to-5u() {
  rg -o '([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])' \
    -r "$(crunch 10 10 + + 123456 -t '$%$%$%$%$%' 2>/dev/null)"
}

# Permutate 7 unicode characters into 3.
rg-perm-7u-to-3u() {
  rg -o '([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])' \
    -r "$(crunch 6 6 + + 1234567 -t '$%$%$%' 2>/dev/null)"
}

# Permutate 7 unicode characters into 4.
rg-perm-7u-to-4u() {
  rg -o '([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])' \
    -r "$(crunch 8 8 + + 1234567 -t '$%$%$%$%' 2>/dev/null)"
}

# Permutate 7 unicode characters into 5.
rg-perm-7u-to-5u() {
  rg -o '([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])' \
    -r "$(crunch 10 10 + + 1234567 -t '$%$%$%$%$%' 2>/dev/null)"
}

# Permutate 8 unicode characters into 3.
rg-perm-8u-to-3u() {
  rg -o '([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])' \
    -r "$(crunch 6 6 + + 12345678 -t '$%$%$%' 2>/dev/null)"
}

# Permutate 8 unicode characters into 4.
rg-perm-8u-to-4u() {
  rg -o '([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])' \
    -r "$(crunch 8 8 + + 12345678 -t '$%$%$%$%' 2>/dev/null)"
}

# Permutate 8 unicode characters into 5.
rg-perm-8u-to-5u() {
  rg -o '([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])' \
    -r "$(crunch 10 10 + + 12345678 -t '$%$%$%$%$%' 2>/dev/null)"
}

# Permutate 9 unicode characters into 3.
rg-perm-9u-to-3u() {
  rg -o '([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])' \
    -r "$(crunch 6 6 + + 123456789 -t '$%$%$%' 2>/dev/null)"
}

# Permutate 9 unicode characters into 4.
rg-perm-9u-to-4u() {
  rg -o '([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])' \
    -r "$(crunch 8 8 + + 123456789 -t '$%$%$%$%' 2>/dev/null)"
}

# Permutate 9 unicode characters into 5.
rg-perm-9u-to-5u() {
  rg_r_arg="$(crunch 5 5 34567 -p 34567 2>/dev/null | sed -E 's/([0-9])/$\1/g;s/([0-9])\$/\1\$/g')"
  rg -o '([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])' \
    -r "$rg_r_arg"
}

# Permutate 9 unicode characters into 6.
rg-perm-9u-to-6u() {
  rg_r_arg="$(crunch 5 5 345678 -p 345678 2>/dev/null | sed -E 's/([0-9])/$\1/g;s/([0-9])\$/\1\$/g')"
  rg -o '([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])([\x{0100}-\x{FFFF}])' \
    -r "$rg_r_arg"
}

# Permutate 3-5 unicode characters.
rg-perm-345u() {
  tee >(rg-perm-3u) >(rg-perm-4u) >(rg-perm-5u) >/dev/null
}

# Permutate 3-5 unicode characters.
rg-perm-56789u-to-3456u() {
  tee \
    >(rg-perm-5u) \
    >(rg-perm-5u-to-3u) >(rg-perm-5u-to-4u) \
    >(rg-perm-6u-to-3u) >(rg-perm-6u-to-4u) \
    >(rg-perm-7u-to-3u) >(rg-perm-7u-to-4u) \
    >(rg-perm-8u-to-3u) >(rg-perm-8u-to-4u) \
    >(rg-perm-9u-to-3u) >(rg-perm-9u-to-4u) \
    >(rg-perm-9u-to-5u) >(rg-perm-9u-to-6u) \
    >/dev/null
}
